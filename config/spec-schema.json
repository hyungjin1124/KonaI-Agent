{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "$id": "https://kona.com/schemas/screen-spec.json",
  "title": "화면 명세서 스키마",
  "description": "한국 SI 표준 화면 명세서 JSON 스키마",
  "type": "object",
  "required": [
    "header",
    "overview",
    "layout",
    "inputFields",
    "buttons",
    "gridColumns",
    "events",
    "messages",
    "changeHistory"
  ],
  "properties": {
    "header": {
      "type": "object",
      "description": "문서 헤더 정보",
      "required": ["screenId", "version", "createdAt", "createdBy"],
      "properties": {
        "screenId": {
          "type": "string",
          "description": "화면 ID",
          "pattern": "^[A-Z]{2,4}-[0-9]{3,4}$",
          "examples": ["SCR-001", "USR-0001"]
        },
        "screenName": {
          "type": "string",
          "description": "화면명",
          "minLength": 1,
          "maxLength": 100
        },
        "version": {
          "type": "string",
          "description": "문서 버전",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
          "examples": ["1.0.0", "2.1.3"]
        },
        "createdAt": {
          "type": "string",
          "format": "date",
          "description": "작성일 (YYYY-MM-DD)"
        },
        "createdBy": {
          "type": "string",
          "description": "작성자"
        },
        "updatedAt": {
          "type": "string",
          "format": "date",
          "description": "수정일 (YYYY-MM-DD)"
        },
        "updatedBy": {
          "type": "string",
          "description": "수정자"
        }
      }
    },
    "overview": {
      "type": "object",
      "description": "화면 개요",
      "required": ["description", "accessPath", "relatedScreens"],
      "properties": {
        "description": {
          "type": "string",
          "description": "화면 설명"
        },
        "accessPath": {
          "type": "string",
          "description": "접근 경로 (메뉴 경로)",
          "examples": ["시스템관리 > 사용자관리 > 사용자조회"]
        },
        "relatedScreens": {
          "type": "array",
          "description": "관련 화면 목록",
          "items": {
            "type": "object",
            "required": ["screenId", "screenName"],
            "properties": {
              "screenId": {
                "type": "string",
                "description": "관련 화면 ID"
              },
              "screenName": {
                "type": "string",
                "description": "관련 화면명"
              },
              "relationship": {
                "type": "string",
                "description": "관계 설명",
                "enum": ["parent", "child", "sibling", "popup", "link"]
              }
            }
          }
        },
        "businessRules": {
          "type": "string",
          "description": "업무 규칙 및 제약사항"
        }
      }
    },
    "layout": {
      "type": "object",
      "description": "화면 레이아웃 정보",
      "required": ["screenshotPath", "areas"],
      "properties": {
        "screenshotPath": {
          "type": "string",
          "description": "스크린샷 이미지 경로"
        },
        "areas": {
          "type": "array",
          "description": "화면 영역 구분",
          "items": {
            "type": "object",
            "required": ["areaId", "areaName", "type"],
            "properties": {
              "areaId": {
                "type": "string",
                "description": "영역 ID",
                "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
              },
              "areaName": {
                "type": "string",
                "description": "영역명 (한글)"
              },
              "type": {
                "type": "string",
                "description": "영역 유형",
                "enum": ["header", "search", "grid", "form", "button", "tab", "tree", "chart", "custom"]
              },
              "description": {
                "type": "string",
                "description": "영역 설명"
              },
              "order": {
                "type": "integer",
                "description": "표시 순서",
                "minimum": 1
              }
            }
          }
        }
      }
    },
    "inputFields": {
      "type": "array",
      "description": "입력 항목 정의",
      "items": {
        "type": "object",
        "required": ["fieldName", "fieldNameEn", "dataType", "length", "required", "defaultValue", "validation"],
        "properties": {
          "fieldId": {
            "type": "string",
            "description": "필드 ID",
            "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
          },
          "fieldName": {
            "type": "string",
            "description": "필드명 (한글)"
          },
          "fieldNameEn": {
            "type": "string",
            "description": "필드명 (영문)"
          },
          "dataType": {
            "type": "string",
            "description": "데이터 타입",
            "enum": ["string", "number", "integer", "date", "datetime", "time", "boolean", "select", "multiselect", "file", "textarea"]
          },
          "length": {
            "type": "integer",
            "description": "최대 길이",
            "minimum": 1
          },
          "required": {
            "type": "boolean",
            "description": "필수 여부",
            "default": false
          },
          "defaultValue": {
            "description": "기본값"
          },
          "validation": {
            "type": "object",
            "description": "유효성 검사 규칙",
            "properties": {
              "pattern": {
                "type": "string",
                "description": "정규식 패턴"
              },
              "min": {
                "type": "number",
                "description": "최소값"
              },
              "max": {
                "type": "number",
                "description": "최대값"
              },
              "minLength": {
                "type": "integer",
                "description": "최소 길이"
              },
              "maxLength": {
                "type": "integer",
                "description": "최대 길이"
              },
              "message": {
                "type": "string",
                "description": "유효성 오류 메시지"
              },
              "customRule": {
                "type": "string",
                "description": "커스텀 유효성 규칙 설명"
              }
            }
          },
          "placeholder": {
            "type": "string",
            "description": "입력 힌트"
          },
          "selectOptions": {
            "type": "array",
            "description": "선택 옵션 (select/multiselect 타입용)",
            "items": {
              "type": "object",
              "required": ["value", "label"],
              "properties": {
                "value": {
                  "type": "string",
                  "description": "옵션 값"
                },
                "label": {
                  "type": "string",
                  "description": "옵션 표시명"
                }
              }
            }
          },
          "areaId": {
            "type": "string",
            "description": "소속 영역 ID"
          },
          "order": {
            "type": "integer",
            "description": "표시 순서"
          },
          "remarks": {
            "type": "string",
            "description": "비고"
          }
        }
      }
    },
    "buttons": {
      "type": "array",
      "description": "버튼/액션 정의",
      "items": {
        "type": "object",
        "required": ["buttonName", "eventType", "action", "permissions"],
        "properties": {
          "buttonId": {
            "type": "string",
            "description": "버튼 ID",
            "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
          },
          "buttonName": {
            "type": "string",
            "description": "버튼명"
          },
          "eventType": {
            "type": "string",
            "description": "이벤트 타입",
            "enum": ["click", "submit", "reset", "link"],
            "default": "click"
          },
          "action": {
            "type": "string",
            "description": "처리 내용 설명"
          },
          "apiEndpoint": {
            "type": "string",
            "description": "호출 API 엔드포인트"
          },
          "httpMethod": {
            "type": "string",
            "description": "HTTP 메소드",
            "enum": ["GET", "POST", "PUT", "PATCH", "DELETE"]
          },
          "permissions": {
            "type": "array",
            "description": "필요 권한 목록",
            "items": {
              "type": "string"
            }
          },
          "confirmMessage": {
            "type": "string",
            "description": "실행 전 확인 메시지"
          },
          "successMessage": {
            "type": "string",
            "description": "성공 시 표시 메시지"
          },
          "areaId": {
            "type": "string",
            "description": "소속 영역 ID"
          },
          "order": {
            "type": "integer",
            "description": "표시 순서"
          }
        }
      }
    },
    "gridColumns": {
      "type": "array",
      "description": "그리드 컬럼 정의",
      "items": {
        "type": "object",
        "required": ["columnName", "columnNameEn", "dataType", "align", "remarks"],
        "properties": {
          "columnId": {
            "type": "string",
            "description": "컬럼 ID",
            "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
          },
          "columnName": {
            "type": "string",
            "description": "컬럼명 (한글)"
          },
          "columnNameEn": {
            "type": "string",
            "description": "컬럼명 (영문)"
          },
          "dataType": {
            "type": "string",
            "description": "데이터 타입",
            "enum": ["string", "number", "integer", "date", "datetime", "boolean", "link", "button", "checkbox", "image"]
          },
          "width": {
            "type": "integer",
            "description": "컬럼 너비 (px)",
            "minimum": 20
          },
          "minWidth": {
            "type": "integer",
            "description": "최소 너비 (px)"
          },
          "align": {
            "type": "string",
            "description": "정렬",
            "enum": ["left", "center", "right"],
            "default": "left"
          },
          "sortable": {
            "type": "boolean",
            "description": "정렬 가능 여부",
            "default": true
          },
          "filterable": {
            "type": "boolean",
            "description": "필터 가능 여부",
            "default": false
          },
          "editable": {
            "type": "boolean",
            "description": "편집 가능 여부",
            "default": false
          },
          "hidden": {
            "type": "boolean",
            "description": "숨김 여부",
            "default": false
          },
          "format": {
            "type": "string",
            "description": "표시 형식",
            "examples": ["###,###", "YYYY-MM-DD", "0.00%"]
          },
          "renderer": {
            "type": "string",
            "description": "커스텀 렌더러 함수명"
          },
          "order": {
            "type": "integer",
            "description": "표시 순서"
          },
          "remarks": {
            "type": "string",
            "description": "비고"
          }
        }
      }
    },
    "events": {
      "type": "array",
      "description": "이벤트 처리 정의",
      "items": {
        "type": "object",
        "required": ["eventId", "eventName", "triggerType", "handler"],
        "properties": {
          "eventId": {
            "type": "string",
            "description": "이벤트 ID",
            "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
          },
          "eventName": {
            "type": "string",
            "description": "이벤트명"
          },
          "triggerType": {
            "type": "string",
            "description": "트리거 유형",
            "enum": ["onClick", "onChange", "onFocus", "onBlur", "onLoad", "onSubmit", "onSelect", "onRowClick", "onRowDblClick", "onCellEdit", "onKeyDown", "onKeyUp", "custom"]
          },
          "targetId": {
            "type": "string",
            "description": "대상 요소 ID"
          },
          "targetType": {
            "type": "string",
            "description": "대상 요소 유형",
            "enum": ["field", "button", "grid", "row", "cell", "screen"]
          },
          "handler": {
            "type": "string",
            "description": "처리 로직 설명"
          },
          "sequence": {
            "type": "integer",
            "description": "실행 순서",
            "minimum": 1
          },
          "condition": {
            "type": "string",
            "description": "실행 조건"
          },
          "relatedEvents": {
            "type": "array",
            "description": "연관 이벤트 ID 목록",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "messages": {
      "type": "array",
      "description": "메시지 정의",
      "items": {
        "type": "object",
        "required": ["messageId", "messageType", "messageText"],
        "properties": {
          "messageId": {
            "type": "string",
            "description": "메시지 ID",
            "pattern": "^MSG-[A-Z]-[0-9]{3,4}$",
            "examples": ["MSG-I-001", "MSG-E-0001"]
          },
          "messageType": {
            "type": "string",
            "description": "메시지 유형",
            "enum": ["info", "success", "warning", "error", "confirm"]
          },
          "messageText": {
            "type": "string",
            "description": "메시지 내용"
          },
          "useCase": {
            "type": "string",
            "description": "사용 시점 설명"
          },
          "parameters": {
            "type": "array",
            "description": "메시지 파라미터",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "changeHistory": {
      "type": "array",
      "description": "변경 이력",
      "items": {
        "type": "object",
        "required": ["version", "changedAt", "changedBy", "changeType", "description"],
        "properties": {
          "version": {
            "type": "string",
            "description": "버전",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
          },
          "changedAt": {
            "type": "string",
            "format": "date",
            "description": "변경일 (YYYY-MM-DD)"
          },
          "changedBy": {
            "type": "string",
            "description": "변경자"
          },
          "changeType": {
            "type": "string",
            "description": "변경 유형",
            "enum": ["create", "update", "delete", "refactor"]
          },
          "description": {
            "type": "string",
            "description": "변경 내용"
          },
          "affectedItems": {
            "type": "array",
            "description": "영향받는 항목 목록",
            "items": {
              "type": "string"
            }
          }
        }
      }
    }
  }
}
